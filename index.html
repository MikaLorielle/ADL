<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spin Logo GIF Recorder</title>
<style>
  body {
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
    background:transparent;
  }
  canvas { background:transparent; }
</style>
</head>
<body>
<canvas id="canvas" width="512" height="512"></canvas>

<script src="https://cdn.jsdelivr.net/npm/gif.js.optimized/dist/gif.js"></script>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const size = 512;

const logo = new Image();
logo.src = "Img.PNG"; // E
const emojis = ["üêà", "ü©∑"];

function easeInOut(t) {
  return t < 0.5 ? 2*t*t : -1 + (4-2*t)*t;
}

function drawContent(content, angle, isEmoji=false) {
  ctx.clearRect(0, 0, size, size);
  ctx.save();
  ctx.translate(size/2, size/2);
  ctx.rotate(angle * Math.PI/180);
  if (isEmoji) {
    ctx.font = "300px sans-serif";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(content, 0, 0);
  } else {
    ctx.drawImage(content, -size/2, -size/2, size, size);
  }
  ctx.restore();
}

logo.onload = () => {
  const fps = 30;
  const spinSec = 2;
  const pauseSec = 1;
  const spinFrames = fps * spinSec;
  const pauseFrames = fps * pauseSec;

  const sequence = [
    {start: logo, end: emojis[0]},
    {start: emojis[0], end: emojis[1]},
    {start: emojis[1], end: logo},
  ];

  const gif = new GIF({
    workers: 2,
    quality: 1,
    transparent: 'rgba(0,0,0,0)',
    workerScript: "https://cdn.jsdelivr.net/npm/gif.js.optimized/dist/gif.worker.js"
  });

  sequence.forEach(step => {
    for (let f=0; f<spinFrames; f++) {
      const t = f/spinFrames;
      const eased = easeInOut(t);
      const angle = eased * 360;

      const halfway = f >= spinFrames/2;
      let content = halfway ? step.end : step.start;
      let isEmoji = (typeof content === "string");

      drawContent(content, angle, isEmoji);
      gif.addFrame(ctx, {copy:true, delay:1000/fps});
    }

    // pause on end frame
    for (let p=0; p<pauseFrames; p++) {
      let content = step.end;
      let isEmoji = (typeof content === "string");
      drawContent(content, 0, isEmoji);
      gif.addFrame(ctx, {copy:true, delay:1000/fps});
    }
  });

  gif.on('finished', function(blob) {
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "spin_loop.gif";
    a.click();
  });

  gif.render();
};
</script>
</body>
</html>